{"version":3,"sources":["/src/views/sign-in/index.tsx"],"sourcesContent":["import Paths from \"@constants/paths.constants\";\r\nimport { useSelector } from \"@hooks\";\r\nimport AuthService from \"@services/auth.service\";\r\nimport { useMutation } from \"@tanstack/react-query\";\r\nimport { useEffect } from \"react\";\r\nimport toast from \"react-hot-toast\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { removeCookie } from \"react-use-cookie\";\r\n\r\nexport default function SignIn() {\r\n  const navigate = useNavigate();\r\n  const { user, setCode, resetUser } = useSelector((state) => state.user);\r\n  const { mutate, isPending } = useMutation({\r\n    mutationFn: AuthService.logIn,\r\n    onSuccess: (_, { code }) => {\r\n      setCode(code);\r\n      navigate(Paths.HOME);\r\n      toast.success(\"Inicio de sesión exitoso\");\r\n    },\r\n    onError: ({ message }) => {\r\n      toast.error(message);\r\n    },\r\n  });\r\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    const form = new FormData(e.currentTarget);\r\n    const code = form.get(\"code\") as string;\r\n    const password = form.get(\"password\") as string;\r\n    mutate({ code, password });\r\n  };\r\n  useEffect(() => {\r\n    resetUser();\r\n    removeCookie(\"tkn\");\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"flex flex-col justify-center\">\r\n      <form\r\n        className=\"flex flex-col w-60 mx-auto gap-3\"\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <h2 className=\"font-bold text-3xl text-balance text-center\">\r\n          Inicia sesión en Carpool\r\n        </h2>\r\n        <label htmlFor=\"code\">Código PUCP</label>\r\n        <input\r\n          type=\"tel\"\r\n          name=\"code\"\r\n          required\r\n          className=\"input \r\n          input-bordered\"\r\n          defaultValue={user?.code ?? \"\"}\r\n        />\r\n        <label htmlFor=\"password\">Contraseña</label>\r\n        <input\r\n          type=\"password\"\r\n          name=\"password\"\r\n          required\r\n          className=\"input input-bordered\"\r\n        />\r\n        <button type=\"submit\" className=\"btn btn-primary mx-auto\">\r\n          {!isPending ? (\r\n            \"Iniciar Sesión\"\r\n          ) : (\r\n            <span className=\"loading loading-spinner\"></span>\r\n          )}\r\n        </button>\r\n        <span className=\"divider text-base-content text-opacity-50\">\r\n          ¿Nuev@ aquí?\r\n        </span>\r\n        <Link to={Paths.SING_UP} className=\"mx-auto\">\r\n          <button className=\"btn btn-primary btn-outline \">Registrate</button>\r\n        </Link>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}