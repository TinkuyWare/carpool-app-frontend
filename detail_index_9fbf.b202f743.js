(function(_){for(var r in _){_[r].__farm_resource_pot__='detail_index_9fbf.js';(globalThis || window || global)['0f6266587c3c880ed98055938bafcf5c'].__farm_module_system__.register(r,_[r])}})({"23dfa296":function e(e,a,s,t){e._m(a),e.o(a,"default",()=>j);var l=s("74824e0b");s("1e2e6a6a"),s("02ab23c1");var c=s("036dd75c"),n=e.i(s("fae7f52f")),i=s("ebc3afb6");s("b889a890");var r=e.i(s("6982241b")),d=e.i(s("c184653d")),o=s("5ef950a6"),x=s("dcd4b961"),f=e.i(s("3b359b6b")),p=s("98a1dcaa"),h=e.i(s("d354c21d")),u=e.i(s("3f3f23aa")),m=s("65738078");function j(a){var s=a.offer,t=i.useSelector(e=>e.user),j=t.type,b=t.user,v=l._(x.useQueries({queries:[{queryKey:[e.f(n).DRIVER_DETAIL,s.ownerCode],queryFn:()=>e.f(r).getDriverByCode(s.ownerCode)},{queryKey:[e.f(n).TRAVEL_PASSENGERS,s.id],queryFn:()=>e.f(d).getTravelPassengers(s.id)}]}),2),N=v[0].data,g=v[1].data,y=(null==N?void 0:N.seats)-s.freeSeats,w=y-(null==g?void 0:g.length);return c.jsxs("article",{className:"px-4 py-2 flex flex-col  h-full",children:[c.jsxs("header",{className:"flex flex-col py-2",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("h2",{className:"font-bold text-3xl text-nowrap",children:m.capitalize(null==N?void 0:N.name.split(" ")[0])+" 🚘"}),c.jsx("span",{className:"text-2xl font-bold text-right",children:p.mapTravelText[s.state]})]}),c.jsx("span",{className:"badge ".concat(s.direction?"badge-primary":"badge-secondary"),children:s.direction?"Ida":"Vuelta"})]}),c.jsxs("main",{className:"flex-grow",children:[c.jsx("section",{children:c.jsx("p",{className:"text-xl text-accent font-bold text-pretty",children:"".concat(s.direction?"Llega a la universidad ":"Sale de la universidad ").concat(e.f(f)(s.travelDate).calendar())})}),c.jsx("section",{className:"py-1",children:c.jsx("p",{className:"text-lg text-balance",children:s.direction?null==N?void 0:N.routeIn:null==N?void 0:N.routeOut})}),c.jsxs("section",{className:"py-2 flex justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-lg badge badge-outline",children:null==N?void 0:N.plate}),c.jsx("p",{children:null==N?void 0:N.vehicleDescription})]}),c.jsx("div",{className:"flex items-center",children:c.jsx("a",{href:"https://wa.me/51".concat(null==N?void 0:N.phone),target:"_blank",className:"btn btn-circle",children:c.jsx(o.IconBrandWhatsapp,{color:"green"})})})]}),c.jsxs("section",{children:[(null==g?void 0:g.length)>0&&c.jsxs("p",{className:"text-base-content text-opacity-70",children:["Nos acompaña".concat(y>1?"n":"")," "]}),c.jsx("ul",{className:"flex flex-col gap-2",children:null==g?void 0:g.map((e,a)=>c.jsxs("li",{className:"flex justify-between items-center",children:[c.jsx("strong",{children:m.capitalize(e.name.split(" ")[0])}),c.jsx("a",{className:"btn btn-circle",href:"https://wa.me/51".concat(e.phone),target:"_blank",children:c.jsx(o.IconBrandWhatsapp,{color:"green"})})]},a))}),w>0&&c.jsx("p",{className:"text-base-content text-opacity-70",children:"y ".concat(w," persona").concat(w>1?"s":""," más")}),s.freeSeats>0&&c.jsx("p",{className:"text-base-content text-opacity-70",children:"Queda espacio para ".concat(s.freeSeats," persona").concat(s.freeSeats>1?"s":""," ")})]})]}),c.jsx("footer",{className:"",children:"driver"===j?c.jsx(e.f(h),{driverCode:null==b?void 0:b.code}):c.jsx(e.f(u),{passengerCode:null==b?void 0:b.code})})]});}},"3f3f23aa":function e(e,a,t,s){e._m(a),e.o(a,"default",()=>p);var n=t("74824e0b"),c=t("036dd75c"),i=t("43e033a1"),l=t("ebc3afb6"),r=e.i(t("61128824")),d=t("dcd4b961"),o=t("da0b8b76"),u=e.i(t("51d9ea92")),b=t("c7c1652a");function p(a){var t=a.passengerCode,s=b.useNavigate(),p=l.useSelector(e=>e.travel).selectedTravel,m=n._(o.useState(!1),2),v=m[0],C=m[1],f=d.useMutation({mutationFn:()=>e.f(r).modifyJoinRequest({travelId:null==p?void 0:p.id,passengerCode:t,joinState:!1}),onSuccess:()=>{s(-1),C(!1),e.f(u).success("Participación cancelada");}}).mutate;return c.jsxs("div",{className:"grid grid-cols-2",children:[(null==p?void 0:p.state)==="CREATED"&&c.jsx("button",{className:"btn btn-error col-span-2",onClick:()=>C(!0),children:"Cancelar participación"}),(null==p?void 0:p.state)==="CANCELED"&&c.jsx("button",{className:"btn"}),c.jsxs(i.ConfirmationModal,{visible:v,handleClose:()=>{C(!1);},handleConfirm:()=>{f();},children:[c.jsx("h1",{className:"text-2xl font-bold",children:"Cancelar participación"}),c.jsx("p",{className:"text-center text-pretty",children:"¿Estás segur@ de que deseas cancelar tu participación?"})]})]});}},"51447ba3":function e(e,t,a,l){e._m(t),e.o(t,"default",()=>d);var c=a("036dd75c"),s=e.i(a("f7176859")),f=a("ebc3afb6"),r=a("5ef950a6"),i=a("c7c1652a"),o=e.i(a("23dfa296")),n=e.i(a("7a0749ac"));function d(){var t=f.useSelector(e=>e.travel),a=t.selectedTravel,l=t.setSelectedTravel,d=i.useNavigate();return a?c.jsxs("div",{className:"flex flex-col",children:[c.jsxs("a",{className:"flex w-fit ml-3 mt-5 items-center text-base-content text-opacity-50 cursor-pointer",onClick:()=>{l(null),d(-1);},children:[c.jsx(r.IconCaretLeftFilled,{height:16,width:16}),"Volver"]}),"offer"===a.type?c.jsx(e.f(o),{offer:a}):c.jsx(e.f(n),{request:a})]}):c.jsx(i.Navigate,{to:e.f(s).HISTORY});}},"7a0749ac":function e(e,a,l,n){e._m(a),e.o(a,"default",()=>m);var s=l("74824e0b");l("1e2e6a6a"),l("02ab23c1");var t=l("036dd75c"),c=l("dcd4b961"),i=e.i(l("3b359b6b")),r=l("5ef950a6");l("b889a890");var d=l("43e033a1"),o=e.i(l("fae7f52f")),x=e.i(l("61128824")),u=e.i(l("c184653d")),f=l("65738078"),h=e.i(l("fffa2767"));function m(a){var l=a.request,n=null==l?void 0:l.id,m=null==l?void 0:l.ownerCode,p=s._(c.useQueries({queries:[{queryKey:[e.f(o).PASSENGER_DETAIL,m],queryFn:()=>e.f(x).getPassengerByCode(m)},{queryKey:[e.f(o).TRAVEL_PASSENGERS,n],queryFn:()=>e.f(u).getTravelPassengers(n),enabled:!!n}]}),2),j=p[0].data,v=p[1].data,b=null==v?void 0:v.length,g=null==v?void 0:v.filter(e=>e.name!=(null==j?void 0:j.name)),y=b-(null==v?void 0:v.length);return t.jsxs("article",{className:"px-4 py-1 flex flex-col h-full",children:[t.jsxs("header",{className:"flex flex-col py-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("h2",{className:"font-bold text-3xl",children:f.capitalize(null==j?void 0:j.name)+" 🤚"}),t.jsx("a",{className:"btn btn-circle",href:"https://wa.me/51".concat(null==j?void 0:j.phone),target:"_blank",children:t.jsx(r.IconBrandWhatsapp,{color:"green"})})]}),t.jsx("span",{className:"badge ".concat((null==l?void 0:l.direction)?"badge-primary":"badge-secondary"),children:(null==l?void 0:l.direction)?"Ida":"Vuelta"})]}),t.jsxs("main",{className:"flex-grow",children:[t.jsxs("section",{children:[t.jsx("p",{className:"text-xl text-accent font-bold text-pretty",children:"".concat((null==l?void 0:l.direction)?"Quiere llegar a la universidad ":"Quiere salir de la universidad ").concat(e.f(i)(null==l?void 0:l.travelDate).calendar())}),t.jsx(d.SeatsStatus,{maxSeats:b,reservedSeats:b})]}),t.jsx("section",{className:"py-1"}),t.jsxs("section",{children:[b-1>0&&t.jsxs("p",{className:"text-base-content text-opacity-70",children:["Nos acompaña".concat(b-1>1?"n":"")," "]}),t.jsx("ul",{className:"flex gap-2",children:null==g?void 0:g.map((e,a)=>t.jsxs("li",{className:"flex justify-between items-center",children:[t.jsx("strong",{children:f.capitalize(e.name.split(" ")[0])}),t.jsx("a",{className:"btn btn-circle",href:"https://wa.me/51".concat(e.phone),target:"_blank",children:t.jsx(r.IconBrandWhatsapp,{color:"green"})})]},a))}),y>0&&t.jsx("p",{className:"text-base-content text-opacity-70",children:"".concat((null==g?void 0:g.length)>0?"y":""," ").concat(y," persona").concat(y>1?"s":""," más")})]})]}),t.jsx("footer",{children:t.jsx(e.f(h),{})})]});}},"d354c21d":function e(e,a,t,l){e._m(a),e.o(a,"default",()=>m);var s=t("fb686e3f"),r=t("6da9187c"),d=t("74824e0b"),n=t("036dd75c"),c=t("da0b8b76"),i=e.i(t("51d9ea92")),o=t("dcd4b961"),u=t("43e033a1"),v=t("ebc3afb6"),f=t("469f1b5d"),C=t("98a1dcaa"),b=e.i(t("6982241b")),x=e.i(t("fae7f52f"));function m(a){var t=a.driverCode,l=v.useSelector(e=>e.travel),m=l.selectedTravel,E=l.setSelectedTravel,T=d._(c.useState(!1),2),j=T[0],S=T[1],p=o.useQueryClient(),h=o.useMutation({mutationFn:a=>e.f(b).modifyOffer({travelId:null==m?void 0:m.id,travelState:a}),onMutate:e=>(E(r._(s._({},m),{state:e})),{previousState:m}),onSuccess:(a,t)=>{p.invalidateQueries({queryKey:[e.f(x).MY_TRAVELS]}),S(!1),"CANCELED"===t?e.f(i).success("Oferta cancelada"):e.f(i).success("Estado actualizado");},onError:(a,t,l)=>{var s=a.message;E(l.previousState),e.f(i).error(s);}}).mutate;return n.jsxs("div",{className:"flex flex-col w-full",children:[(null==m?void 0:m.ownerCode)===t&&n.jsx(u.DropdownList,{onSelect:e=>{var a=Object.values(f.TravelState).find(a=>C.mapTravelText[a]===e);a&&m&&h(a);},values:Object.values(f.TravelState).filter(e=>"CANCELED"!==e).map(e=>C.mapTravelText[e]),selectedValue:C.mapTravelText[null==m?void 0:m.state],disabled:(null==m?void 0:m.state)==="CANCELED"}),(null==m?void 0:m.state)==="CREATED"&&n.jsx("button",{className:"btn btn-error col-span-2",onClick:()=>S(!0),children:"Cancelar viaje"}),n.jsxs(u.ConfirmationModal,{visible:j,handleClose:()=>{S(!1);},handleConfirm:()=>{m&&h("CANCELED");},children:[n.jsx("h1",{className:"text-2xl font-bold text-center",children:"Cancelar viaje"}),n.jsx("p",{className:"text-center text-pretty",children:"¿Estás segur@ de que deseas cancelar el viaje?"})]})]});}},"fffa2767":function e(e,a,t,l){e._m(a),e.o(a,"default",()=>E);var s=t("fb686e3f"),r=t("6da9187c"),i=t("74824e0b");t("e418ffc9"),t("07bb7302");var c=t("036dd75c"),d=t("c7c1652a"),n=e.i(t("51d9ea92")),u=t("43e033a1"),o=t("ebc3afb6"),v=t("da0b8b76"),f=t("98a1dcaa"),C=t("469f1b5d"),b=t("dcd4b961"),m=e.i(t("61128824")),p=e.i(t("fae7f52f"));function E(){var a=d.useNavigate(),t=o.useSelector(e=>e.user).user,l=o.useSelector(e=>e.travel),E=l.selectedTravel,x=l.setSelectedTravel,S=i._(v.useState(!1),2),N=S[0],T=S[1],j=b.useQueryClient(),h=b.useMutation({mutationFn:a=>"CANCELED"===a?e.f(m).modifyJoinRequest({passengerCode:null==t?void 0:t.code,travelId:null==E?void 0:E.id,joinState:!1}):e.f(m).modifyRequest({travelId:null==E?void 0:E.id,travelState:a}),onMutate:e=>(x(r._(s._({},E),{state:e})),{previusState:E}),onSuccess:(t,l)=>{j.invalidateQueries({queryKey:[e.f(p).MY_TRAVELS]}),T(!1),"CANCELED"===l?(e.f(n).success("Participación cancelada"),a(-1)):e.f(n).success("Estado actualizado");},onError:(a,t,l)=>{var s=a.message;x(l.previusState),e.f(n).error(s);}}).mutate;return c.jsxs("div",{className:"grid grid-cols-2 w-full",children:[(null==E?void 0:E.ownerCode)===(null==t?void 0:t.code)&&c.jsx(u.DropdownList,{onSelect:e=>{var a=Object.values(C.TravelState).find(a=>f.mapTravelText[a]===e);a&&E&&h(a);},values:Object.values(C.TravelState).filter(e=>"CANCELED"!==e&&"WAITING"!==e).map(e=>f.mapTravelText[e]),selectedValue:f.mapTravelText[null==E?void 0:E.state],disabled:["CANCELED","OFF"].includes(null==E?void 0:E.state)}),!["CANCELED","OFF"].includes(null==E?void 0:E.state)&&c.jsx("button",{className:"btn btn-error col-span-2 w-full",onClick:()=>T(!0),children:"Cancelar"}),c.jsxs(u.ConfirmationModal,{visible:N,handleClose:()=>{T(!1);},handleConfirm:()=>{E&&h("CANCELED");},children:[c.jsx("h1",{className:"text-2xl font-bold text-center",children:"Cancelar participación"}),c.jsx("p",{className:"text-center text-pretty",children:"¿Estás segur@ de que deseas cancelar tu participación?"})]})]});}},});
//# sourceMappingURL=detail_index_9fbf.b202f743.js.map